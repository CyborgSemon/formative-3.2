let url;function checkUser(){sessionStorage.userId?($("#fab").show(),$(".devButtons").css("display","flex"),$("#noUserBtns").hide(),$("#logoutBtn").show()):($("#fab").hide(),$(".devButtons").css("display","none"),$("#logoutBtn").hide(),$("#noUserBtns").show())}$.ajax({url:"config.json",type:"GET",dataType:"json",success:function(e){url=`${e.SERVER_URL}:${e.SERVER_PORT}`,getAllItems()},error:function(){console.log("cannot find config.json file, cannot run application")}}),checkUser(),$("#register").submit(function(){if(event.preventDefault(),sessionStorage.userID)return void alert("401, permission denied");const e=$("#username").val(),s=$("#password").val(),l=$("#passwordCheck").val(),a=$("#fullName").val(),o=$("#email").val();0==e.length?console.log("please enter a username"):0==o.length?console.log("please enter an email"):0==a.length?console.log("Please enter a full name"):0==s.length?console.log("Plese enter a password"):0==l.length?console.log("Plese enter your password again"):s!=l?console.log("Your passwords do not match"):$.ajax({url:`${url}/users`,type:"POST",data:{username:e,password:s,fullName:a,email:o},success:function(e){$("#dialog2").hide(),$("#username").val(null),$("#password").val(null),$("#passwordCheck").val(null),$("#fullName").val(null),$("#email").val(null),checkUser()},error:function(e){console.log(e),console.log("Something went wrong with registering a new user")}})}),$("#login").submit(()=>{if(event.preventDefault(),sessionStorage.userId)return void alert("401, permission denied");const e=$("#lUsername").val(),s=$("#lPassword").val();$.ajax({url:`${url}/login`,type:"POST",data:{username:e,password:s},error:e=>{console.log("Somthing went wrong with logging in"),console.log(e)},success:e=>{console.log(e),sessionStorage.userId=e._id,sessionStorage.username=e.username,sessionStorage.fullName=e.fullName,sessionStorage.email=e.email,$("#dialog1").hide(),$("#lUsername").val(null),$("#lPassword").val(null),checkUser()}})}),$("#addItem").submit(()=>{event.preventDefault();let e=$("#itemName").val(),s=$("#itemDescription").val(),l=$("#itemImageUrl").val(),a=$("#itemUrl").val();0==e.length?console.log("please enter a username"):0==s.length?console.log("please enter an email"):0==l.length?console.log("Please enter a full name"):0==a.length?console.log("Plese enter a password"):$.ajax({url:`${url}/addItem`,type:"POST",data:{name:e,author:sessionStorage.fullName,url:a,imageUrl:l,description:s,userId:sessionStorage.userId},error:e=>{console.log("there was an error adding the item"),console.log(e)},success:e=>{console.log(e)}})}),$("#logoutBtn").click(()=>{sessionStorage.clear(),checkUser()}),$("#loginBtn").click(()=>{$("#dialog1").show()}),$("#dialogBackground1").click(()=>{$("#dialog1").hide()}),$("#registerBtn").click(()=>{$("#dialog2").show()}),$("#dialogBackground2").click(()=>{$("#dialog2").hide()}),$("#fab").click(()=>{$("#dialog3").show()}),$("#dialogBackground3").click(()=>{$("#dialog3").hide()});let grid=document.getElementById("projects"),cards=[];function getAllItems(){$.ajax({url:`${url}/allItems`,type:"GET",error:e=>{console.log("Cant get all items"),console.log(e)},success:e=>{prepCards(e)}})}function prepCards(e){cards=[];for(var s=0;s<e.length;s++){let l;console.log(),l=sessionStorage.userId&&sessionStorage.userId==e[s].user_id?`<div class="cardButtons"><a onclick="event.stopPropagation()" href="${e[s].url}" target="_blank" class="cardLink">Take a look!</a><div class="devButtons"><div class="iconButton" onclick="event.stopPropagation()"><i class="material-icons">edit</i></div><div class="iconButton" onclick="event.stopPropagation()"><i class="material-icons">delete</i></div></div></div>`:`<div class="cardButtons"><a onclick="event.stopPropagation()" href="${e[s].url}" target="_blank" class="cardLink">Take a look!</a></div>`,cards.push(`<div class="card">\n        <div class="cardImage">\n        <img src="${e[s].imageUrl}">\n        </div>\n        <div class="cardText">\n        <span class="cardTitle">${e[s].name}</span>\n        <span class="cardAuthor">${e[s].author}</span>\n        <p class="cardDescription">\n        ${e[s].description}\n        ${l}\n        </p>\n        </div>\n        </div>`)}loadCards(document.body.clientWidth)}function loadCards(e,s=!1){let l;projects.innerHTML=null,e<460?($(".column").css("width","100%"),projects.innerHTML='<div class="column" data-colNum="1"></div>',l=1):e<720?($(".column").css("width","50%"),projects.innerHTML='<div class="column" data-colNum="1"></div><div class="column" data-colNum="2"></div>',l=2):e<=1024?($(".column").css("width","33.333%"),projects.innerHTML='<div class="column" data-colNum="1"></div><div class="column" data-colNum="2"></div><div class="column" data-colNum="3"></div>',l=3):e>1024&&($(".column").css("width","25%"),projects.innerHTML='<div class="column" data-colNum="1"></div><div class="column" data-colNum="2"></div><div class="column" data-colNum="3"></div><div class="column" data-colNum="4"></div>',l=4);for(let e=0;e<cards.length;e++)document.querySelector(`[data-colNum="${e%l+1}"]`).innerHTML+=cards[e];[].forEach.call(document.querySelectorAll(".card"),e=>{e.addEventListener("click",()=>{e.classList.contains("active")?e.classList.remove("active"):([].forEach.call(document.querySelectorAll(".card"),e=>{e.classList.remove("active")}),e.classList.add("active"))})}),checkUser()}$(window).resize(function(){loadCards(document.body.clientWidth)});